name: 'Test App'
description: 'Run tests and code analysis'
runs:
  using: "composite"
  steps:
    - name: Tests
      run: mvn verify
    - name: Checkstyle
      run: mvn checkstyle:check
    - name: Spotbugs
      run: mvn spotbugs:check
    - name: Build and analyze
      env:
        GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
        SONAR_TOKEN: ${{ secrets.SONAR_TOKEN }}
      run: mvn -B verify org.sonarsource.scanner.maven:sonar-maven-plugin:sonar -Dsonar.projectKey=binark_gradebook -Dsonar.organization=binark
